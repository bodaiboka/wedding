<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nini + Ricsi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="canvas-container">
        <canvas id="wedding-canvas"></canvas>
    </div>

    <div class="welcome" >
        <div class="welcome-icon">É</div>

        <p class="welcome-text">Kedves szerettünk! Örömmel értesítünk, hogy</p>

        <div class="welcome-title"><h1>ichárnin</h1></div>

        <p>örök hűséget fogadunk egymásnak, ezért meghívunk titeket esküvőnkre, melynek időpontja</p>

        <div class="date">
            <div class="month"><p>július</p></div>
            <div class="day"><p>28</p><p>péntek</p></div>
            <div class="year"><p>2023</p></div>
        </div>

        <div class="info">
            <div class="details">
                <p>részletek</p>
                <i class="bi bi-chevron-double-down"></i>
                <!-- <i class="bi bi-chevron-double-up"></i> -->
                
            </div>
    
            <div class="info-bar">
                <div class="church-tbn">&#x47;</div>
                <div class="civil-btn">&#x50;</div>
                <div class="dinner-btn">&#xFF;</div>
                <div class="cake-btn">&#xB6;</div>
            </div>
        </div>

    </div>

    <script type="module" src="graphics.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
    <script>
        $(document).ready(function() {

            isInfoOpen = false;
            $welcome = $('.welcome');
            $weddingCanvas = $('#wedding-canvas');
            $detailsButton = $('.info .details');
            $infoBar = $('.info-bar');
            $churchBtn = $('.church-btn');
            $civilBtn = $('.civil-btn');
            $dinnerBtn = $('.dinner-btn');
            $cakeBtn = $('.cake-btn');
            let welcomeTitleOffset = $('.welcome .date').offset().top;
            $('.info-bar').css({
                'display': 'none'
            });

            const toggleInfo = () => {
                if (isInfoOpen) {
                    let welcomeOfset = $('body').height()/2 - $welcome.height()/2;
                    console.log($('body').height(), $welcome.height(), welcomeOfset);
                    $welcome.css({
                        'top': `${welcomeOfset}px`
                    });
                } else {
                    $welcome.css({
                            'top': `${0 - welcomeTitleOffset}px`
                    })
                }
                isInfoOpen = !isInfoOpen;
            }

            const onResize = () => {
                let welcomeOfset = $('body').height()/2 - $welcome.height()/2;
                console.log($('body').height(), $welcome.height(), welcomeOfset);
                $welcome.css({
                    'top': `${welcomeOfset}px`
                });
                $weddingCanvas.width($('.canvas-container').width());
            }
            onResize();
            $(window).on('resize', onResize);

            
            $detailsButton.on('click', (event) => {
                console.log('click');
                $('.info-bar').slideToggle(350, () => {
                        //$welcome.toggleClass('top');
                        toggleInfo();
                        $('.welcome .date').toggleClass('transparent');
                        
                    });
            })

            $infoBar.on("click", "div", function() {
                $infoBar.css({
                    '--translate-btn': `${$(this).index() * $(this).outerWidth(true)}px`
                });
            });
        })
    </script>
</body>
</html>